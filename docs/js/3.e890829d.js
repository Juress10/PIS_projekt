(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{1:function(t,a){},2:function(t,a){},3:function(t,a){},3017:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"text-h6"},[e("b",[t._v("Uloženie poistnej udalosti")])]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n       Vykonané zmeny boli uložené\n    ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"},on:{click:function(a){return t.vratNaVsetky()}}})],1)],1)},s=[],n=e("967e"),i=e.n(n),r=(e("96cf"),e("fa84")),c=e.n(r),l={methods:{vratNaVsetky:function(){var t=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$router.push({name:"employee"});case 1:case"end":return a.stop()}}),a)})))()}}},u=l,p=e("2877"),d=e("eebe"),f=e.n(d),v=e("f09f"),m=e("a370"),_=e("2c91"),h=e("9c40"),b=e("4b7e"),k=e("7f67"),y=Object(p["a"])(u,o,s,!1,null,null,null);a["default"]=y.exports;f()(y,"components",{QCard:v["a"],QCardSection:m["a"],QSpace:_["a"],QBtn:h["a"],QCardActions:b["a"]}),f()(y,"directives",{ClosePopup:k["a"]})},4:function(t,a){},5:function(t,a){},6:function(t,a){},7:function(t,a){},"9d10":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row hlavny-box"},[e("div",{staticClass:"col-8 row"},[e("h5",{staticClass:"col-12"},[t._v("Poistná udalosť")]),e("div",{staticClass:"col-5 boxicek"},[e("q-input",{attrs:{filled:"","bottom-slots":"",label:"Id udalosti"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:t.poistna_udalost.id,callback:function(a){t.$set(t.poistna_udalost,"id",a)},expression:"poistna_udalost.id"}})],1),e("div",{staticClass:"col-5"},[e("q-input",{attrs:{filled:"","bottom-slots":"",label:"Id poistenca"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"perm_identity"}})]},proxy:!0}]),model:{value:t.poistna_udalost.poistenec_id,callback:function(a){t.$set(t.poistna_udalost,"poistenec_id",a)},expression:"poistna_udalost.poistenec_id"}})],1),e("q-input",{staticClass:"col-12 boxicek vyrovnanie-dlzky",attrs:{filled:"",type:"textarea",label:"Opis vzniknutej škody"},model:{value:t.poistna_udalost.opis_skody,callback:function(a){t.$set(t.poistna_udalost,"opis_skody",a)},expression:"poistna_udalost.opis_skody"}}),e("q-input",{staticClass:"col-6 boxicek",attrs:{filled:"","bottom-slots":"",label:"Miesto vzniknutej škody"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:t.poistna_udalost.miesto_skody,callback:function(a){t.$set(t.poistna_udalost,"miesto_skody",a)},expression:"poistna_udalost.miesto_skody"}}),e("div",{staticClass:"col-5"},[e("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:t.poistna_udalost.datum_skody,callback:function(a){t.$set(t.poistna_udalost,"datum_skody",a)},expression:"poistna_udalost.datum_skody"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:t.poistna_udalost.datum_skody,callback:function(a){t.$set(t.poistna_udalost,"datum_skody",a)},expression:"poistna_udalost.datum_skody"}})],1)],1)]},proxy:!0}]),model:{value:t.poistna_udalost.datum_skody,callback:function(a){t.$set(t.poistna_udalost,"datum_skody",a)},expression:"poistna_udalost.datum_skody"}})],1),e("drag-and-drop-img",{attrs:{url:t.url}}),e("div",{staticClass:"col-2 row"},[e("q-btn",{staticClass:"col-12 self-end save-button",attrs:{rounded:"",color:"accent",size:t.xl},on:{click:[function(a){t.zobrazUlozenie=!0},function(a){t.updatePoistnaUdalost(),t.ulozitRozpracovana()}]}},[e("q-icon",{staticClass:"text-white",attrs:{name:"save",size:"sm"}}),e("q-space"),t._v("\n          Uložiť\n          "),e("q-space")],1),e("q-btn",{staticClass:"col-12 self-end save-button",attrs:{rounded:"",color:"cyan-8",size:t.xl},on:{click:function(a){t.potvrditUdalost(),t.vratNotifikovanie()}}},[e("q-icon",{staticClass:"text-white",attrs:{name:"done_outline",size:"sm"}}),e("q-space"),t._v("\n          Potvrdiť\n          ")],1)],1),e("q-dialog",{model:{value:t.zobrazUlozenie,callback:function(a){t.zobrazUlozenie=a},expression:"zobrazUlozenie"}},[e("zobraz-okno-ulozenie")],1),e("q-dialog",{model:{value:t.chybajuceUdaje,callback:function(a){t.chybajuceUdaje=a},expression:"chybajuceUdaje"}},[e("chybajuce-udaje")],1),e("q-dialog",{model:{value:t.neadekvatnaSuma,callback:function(a){t.neadekvatnaSuma=a},expression:"neadekvatnaSuma"}},[e("neadekvatna-suma")],1),e("q-dialog",{model:{value:t.notifikovanieEmailom,callback:function(a){t.notifikovanieEmailom=a},expression:"notifikovanieEmailom"}},[e("notifikovanie-emailom")],1),e("q-dialog",{model:{value:t.notifikovanieSMS,callback:function(a){t.notifikovanieSMS=a},expression:"notifikovanieSMS"}},[e("notifikovanie-sms")],1)],1),e("div",{staticClass:"col-4"},[e("h5",{staticClass:"col-12"},[t._v("Správa o poistnej udalosti")]),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{filled:"","bottom-slots":"",label:"Meno a priezvisko"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"note"}})]},proxy:!0}]),model:{value:t.poistna_sprava.meno_priezvisko,callback:function(a){t.$set(t.poistna_sprava,"meno_priezvisko",a)},expression:"poistna_sprava.meno_priezvisko"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{filled:"","bottom-slots":"",label:"Odhadnuta cena"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"euro_symbol"}})]},proxy:!0}]),model:{value:t.poistna_sprava.odhadnuta_suma,callback:function(a){t.$set(t.poistna_sprava,"odhadnuta_suma",a)},expression:"poistna_sprava.odhadnuta_suma"}})],1),e("q-input",{staticClass:"col-12 boxicek",attrs:{filled:"",type:"textarea",label:"Správa pre poistenca"},model:{value:t.poistna_sprava.text_spravy,callback:function(a){t.$set(t.poistna_sprava,"text_spravy",a)},expression:"poistna_sprava.text_spravy"}}),e("div",{staticClass:"col-12 row justify-between"},[e("div",{staticClass:"col-7",staticStyle:{width:"150px",height:"30px"}}),e("q-btn",{staticClass:"col-4 self-end save-button",attrs:{rounded:"",color:"accent",size:t.xl},on:{click:function(a){return t.updatePoistnaSprava()}}},[e("q-icon",{staticClass:"text-white",attrs:{name:"save",size:"sm"}}),e("q-space"),t._v("\n              Uložiť\n          "),e("q-space")],1)],1)],1)])},s=[],n=(e("551c"),e("06db"),e("967e")),i=e.n(n),r=(e("96cf"),e("fa84")),c=e.n(r),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md col-9"},[e("div",{staticClass:"q-col-gutter-md row items-start"},[t._l(t.url,(function(a){return e("q-img",{key:a.pathname,staticClass:"col-2 rounded-borders",staticStyle:{width:"170px",height:"115px"},attrs:{src:a}},[e("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[t._v("\n            "+t._s(a.pathname)+"\n        ")]),e("q-btn",{staticStyle:{color:"grey"},attrs:{color:"grey-3","text-color":"black",title:"Remove"},on:{click:function(e){return t.removeImg(a)}}},[e("q-icon",{staticClass:"text-black",attrs:{name:"clear",size:"sm"}})],1)],1)})),e("div",{staticClass:"col-2 bg-blue-grey-3 row justify-center items-center",staticStyle:{border:"dotted 3px black",width:"170px",height:"115px",padding:"0"},on:{drop:function(a){return a.preventDefault(),t.addFile(a)},dragover:[function(t){t.preventDefault()},t.dragover],dragleave:t.dragleave}},[e("q-icon",{staticClass:"text-blue-grey",attrs:{name:"cloud_upload",size:"xl"}})],1)],2)])},u=[],p=e("4db1"),d=e.n(p),f={name:"DragAndDropImg",props:["url"],data:function(){return{files:[]}},computed:{uploadDisabled:function(){return 0===this.files.length}},methods:{addFile:function(t){var a=this;event.currentTarget.classList.add("bg-blue-grey-3"),event.currentTarget.classList.remove("bg-cyan-8");var e=t.dataTransfer.files;e&&d()(e).forEach((function(t){a.url.push(URL.createObjectURL(t)),a.files.push(t)}))},dragover:function(t){console.log("fsfsd"),t.currentTarget.classList.contains("bg-cyan-8")||(t.currentTarget.classList.remove("bg-blue-grey-3"),t.currentTarget.classList.add("bg-cyan-8"))},dragleave:function(t){t.currentTarget.classList.add("bg-blue-grey-3"),t.currentTarget.classList.remove("bg-cyan-8")},removeFile:function(t){this.files=this.files.filter((function(a){return a!==t}))},removeImg:function(t){this.url=this.url.filter((function(a){return a!==t}))},upload:function(){var t=new FormData;this.files.forEach((function(a,e){t.append("file"+(e+1),a)})),fetch("https://httpbin.org/post",{method:"POST",body:t}).then((function(t){return t.json()})).then((function(t){console.log("done uploading",t)})).catch((function(t){console.error(JSON.stringify(t.message))}))}}},v=f,m=e("2877"),_=e("eebe"),h=e.n(_),b=e("068f"),k=e("9c40"),y=e("0016"),g=Object(m["a"])(v,l,u,!1,null,"4ac2ea82",null),x=g.exports;h()(g,"components",{QImg:b["a"],QBtn:k["a"],QIcon:y["a"]});var q={components:{"drag-and-drop-img":x,"zobraz-okno-ulozenie":e("3017").default,"chybajuce-udaje":e("d832").default,"neadekvatna-suma":e("b020").default,"notifikovanie-emailom":e("b58e").default,"notifikovanie-sms":e("f953").default},data:function(){return{files:[],url:[],poistna_udalost:{},poistna_sprava:{},notifikovanie:"",zobrazUlozenie:!1,chybajuceUdaje:!1,neadekvatnaSuma:!1,notifikovanieEmailom:!1,notifikovanieSMS:!1}},methods:{vratNotifikovanie:function(){var t=this;this.$axios.get(this.$store.state.store.URL+"/api/udalost/read/notifikovanie/"+this.poistna_udalost.id).then((function(a){console.log(a),t.notifikovanie=a.data()})).catch((function(t){console.log(t)}))},sendEmail:function(){var t=this;return c()(i.a.mark((function a(){var o,s,n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e("c13f"),s=e("083c").parseString,n=!1,o.createClientAsync("http://pis.predmety.fiit.stuba.sk/pis/ws/NotificationServices/Email?WSDL").then((function(a){a.notify({team_id:"074",password:"4GKU4S",email:t.poistna_udalost.poistenec_id+"@gmail.com",subject:"oboznamenie o poistke",message:t.poistna_sprava.text_spravy},(function(t,a){a.body?s(a.body,(function(t,a){n=a})):(t&&console.log(t),n=a)}))})),a.next=6,t.sleep(2e3);case 6:return a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},sendSMS:function(){var t=this;return c()(i.a.mark((function a(){var o,s,n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e("c13f"),s=e("083c").parseString,n=!1,o.createClientAsync("http://pis.predmety.fiit.stuba.sk/pis/ws/NotificationServices/SMS?WSDL").then((function(a){a.notify({team_id:"074",password:"4GKU4S",phone:"0909242556",subject:"oboznamenie o poistke",message:t.poistna_sprava.text_spravy},(function(t,a){a.body?s(a.body,(function(t,a){n=a})):(t&&console.log(t),n=a)}))})),a.next=6,t.sleep(2e3);case 6:return a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},sleep:function(t){return new Promise((function(a){return setTimeout(a,t)}))},potvrditUdalost:function(){var t=this;return c()(i.a.mark((function a(){var e;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("undefined"===typeof t.poistna_sprava.id||""===t.poistna_sprava.id||"undefined"===typeof t.poistna_sprava.meno_priezvisko||""===t.poistna_sprava.meno_priezvisko||"undefined"===typeof t.poistna_sprava.odhadnuta_suma||""===t.poistna_sprava.odhadnuta_suma||"undefined"===typeof t.poistna_sprava.text_spravy||""===t.poistna_sprava.text_spravy||"undefined"===typeof t.poistna_udalost.datum_skody||""===t.poistna_udalost.datum_skody||"undefined"===typeof t.poistna_udalost.opis_skody||""===t.poistna_udalost.opis_skody||"undefined"===typeof t.poistna_udalost.miesto_skody||""===t.poistna_udalost.miesto_skody){a.next=9;break}return t.$axios.post(t.$store.state.store.URL+"/api/potvrdit",{id:t.poistna_udalost.id,suma:t.poistna_sprava.odhadnuta_suma}).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),a.next=4,t.sendEmail();case 4:e=a.sent,console.log("email bol poistencovy poslany: "+e.success),t.notifikovanieEmailom=!0,a.next=10;break;case 9:t.chybajuceUdaje=!0;case 10:case"end":return a.stop()}}),a)})))()},updatePoistnaUdalost:function(){console.log(this.poistna_udalost),this.$axios.put(this.$store.state.store.URL+"/api/udalost/update/"+this.poistna_udalost.id,this.poistna_udalost).then((function(t){console.log(t)})).catch((function(t){console.log("error",t)}))},updatePoistnaSprava:function(){console.log(this.poistna_sprava),"undefined"!==typeof this.poistna_sprava.id?this.$axios.put(this.$store.state.store.URL+"/api/sprava/update/"+this.poistna_sprava.id,this.poistna_sprava).then((function(t){console.log(t)})).catch((function(t){console.log("error",t)})):(this.poistna_sprava.poistna_udalost_id=this.poistna_udalost.id,this.$axios.post(this.$store.state.store.URL+"/api/sprava/create",this.poistna_sprava).then((function(t){console.log(t)})).catch((function(t){console.log("error",t)})))},ulozitRozpracovana:function(){console.log(this.poistna_udalost),this.$axios.put(this.$store.state.store.URL+"/api/udalost/update/rozpracovana/"+this.poistna_udalost.id,this.poistna_udalost).then((function(t){console.log(t)})).catch((function(t){console.log("error",t)}))}},created:function(){var t=this;this.$axios.get(this.$store.state.store.URL+"/api/udalost/read/"+this.$route.params.id).then((function(a){console.log(a.data),t.poistna_udalost=a.data})).catch((function(t){console.log("error",t)})).then((function(){null!=t.poistna_udalost&&t.$axios.get(t.$store.state.store.URL+"/api/sprava/read/"+t.poistna_udalost.id).then((function(a){t.poistna_sprava=a.data,console.log(t.poistna_sprava)})).catch((function(t){console.log("error",t)}))}))}},C=q,w=(e("e497"),e("27f9")),S=e("7cbe"),z=e("52ee"),Q=e("ca78"),$=e("2c91"),j=e("24e8"),U=Object(m["a"])(C,o,s,!1,null,null,null);a["default"]=U.exports;h()(U,"components",{QInput:w["a"],QIcon:y["a"],QPopupProxy:S["a"],QDate:z["a"],QTime:Q["a"],QBtn:k["a"],QSpace:$["a"],QDialog:j["a"]})},b020:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"text-h6"},[e("b",[t._v("Chyba")])]),e("q-space")],1),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n       Odhadovaná suma je neadekvátna. Posúvam na posúdenie manažérovi.\n    ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)},s=[],n={},i=n,r=e("2877"),c=e("eebe"),l=e.n(c),u=e("f09f"),p=e("a370"),d=e("2c91"),f=e("4b7e"),v=e("9c40"),m=e("7f67"),_=Object(r["a"])(i,o,s,!1,null,null,null);a["default"]=_.exports;l()(_,"components",{QCard:u["a"],QCardSection:p["a"],QSpace:d["a"],QCardActions:f["a"],QBtn:v["a"]}),l()(_,"directives",{ClosePopup:m["a"]})},b58e:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"text-h6"},[e("b",[t._v("Ohodnotenie úspešné")])]),e("q-space")],1),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n       Ohodnotenie bolo uspešné. Poistenec bude notifikovaný na email.\n    ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"},on:{click:function(a){return t.vratNaVsetky()}}})],1)],1)},s=[],n=e("967e"),i=e.n(n),r=(e("96cf"),e("fa84")),c=e.n(r),l={methods:{vratNaVsetky:function(){var t=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$router.push({name:"employee"});case 1:case"end":return a.stop()}}),a)})))()}}},u=l,p=e("2877"),d=e("eebe"),f=e.n(d),v=e("f09f"),m=e("a370"),_=e("2c91"),h=e("4b7e"),b=e("9c40"),k=e("7f67"),y=Object(p["a"])(u,o,s,!1,null,null,null);a["default"]=y.exports;f()(y,"components",{QCard:v["a"],QCardSection:m["a"],QSpace:_["a"],QCardActions:h["a"],QBtn:b["a"]}),f()(y,"directives",{ClosePopup:k["a"]})},d0d7:function(t,a,e){},d832:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"text-h6"},[e("b",[t._v("Chyba")])]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n       Niektoré údaje chýbajú. Prosím, vyplňte všetky údaje.\n    ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)},s=[],n={},i=n,r=e("2877"),c=e("eebe"),l=e.n(c),u=e("f09f"),p=e("a370"),d=e("2c91"),f=e("9c40"),v=e("4b7e"),m=e("7f67"),_=Object(r["a"])(i,o,s,!1,null,null,null);a["default"]=_.exports;l()(_,"components",{QCard:u["a"],QCardSection:p["a"],QSpace:d["a"],QBtn:f["a"],QCardActions:v["a"]}),l()(_,"directives",{ClosePopup:m["a"]})},e497:function(t,a,e){"use strict";var o=e("d0d7"),s=e.n(o);s.a},f953:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"text-h6"},[e("b",[t._v("Ohodnotenie úspešné")])]),e("q-space")],1),e("q-card-section",{staticClass:"q-pt-none"},[t._v("\n       Ohodnotenie bolo uspešné. Poistenec bude notifikovaný SMS na telefónne číslo.\n    ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)},s=[],n={},i=n,r=e("2877"),c=e("eebe"),l=e.n(c),u=e("f09f"),p=e("a370"),d=e("2c91"),f=e("4b7e"),v=e("9c40"),m=e("7f67"),_=Object(r["a"])(i,o,s,!1,null,null,null);a["default"]=_.exports;l()(_,"components",{QCard:u["a"],QCardSection:p["a"],QSpace:d["a"],QCardActions:f["a"],QBtn:v["a"]}),l()(_,"directives",{ClosePopup:m["a"]})}}]);